sudo: required
dist: trusty

# blacklist
branches:
  except:
    - reorganization
â€‹
# whitelist
branches:
  only:
    - master

language: cpp

compiler:
  - gcc
  - clang
os:
  - linux
  - osx

install:
    - CI_DIR=$PWD
    - if [ "$TRAVIS_OS_NAME" = linux -o -z "$TRAVIS_OS_NAME" ]; then sudo sh -c 'echo "deb http://www.icub.org/ubuntu trusty contrib/science" > /etc/apt/sources.list.d/icub.list' ; fi
    - if [ "$TRAVIS_OS_NAME" = linux -o -z "$TRAVIS_OS_NAME" ]; then sudo apt-get update ; fi
    - if [ "$TRAVIS_OS_NAME" = linux -o -z "$TRAVIS_OS_NAME" ]; then sudo apt-get install -qq -y yarp --force-yes ; fi
    - if [ "$TRAVIS_OS_NAME" = linux -o -z "$TRAVIS_OS_NAME" ]; then sudo apt-get install -qq -y libeigen3-dev libboost-all-dev ; fi
    - if [ "$TRAVIS_OS_NAME" = osx -o -z "$TRAVIS_OS_NAME" ]; then brew update ; fi
    - if [ "$TRAVIS_OS_NAME" = osx -o -z "$TRAVIS_OS_NAME" ]; then brew install eigen tinyxml ; fi
    - if [ "$TRAVIS_OS_NAME" = osx -o -z "$TRAVIS_OS_NAME" ]; then brew tap homebrew/x11 && brew install yarp ; fi
    - git clone https://github.com/ocra-recipes/eigen_lgsm.git
    - cd eigen_lgsm ; mkdir build ; cd build ; cmake ..
    - sudo make install
    - cd $CI_DIR
    - mkdir build ; cd build
    - mkdir ~/ocra-install
    - cmake .. -DCMAKE_INSTALL_PREFIX=~/ocra-install
script:
    - make -j2
    - make install
    #run tests
